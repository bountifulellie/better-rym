{
  "{{chrome}}.manifest_version": 3,
  "{{firefox}}.manifest_version": 2,
  "icons": {
    "16": "icons/sonemic-16.png",
    "48": "icons/sonemic-48.png",
    "128": "icons/sonemic-128.png"
  },
  "action": {
    "default_title": "BetterRYM"
  },
  "background": {
    "{{chrome}}.service_worker": "src/modules/background/index.ts",
    "{{firefox}}.scripts": ["src/modules/background/index.ts"]
  },
  "content_scripts": [
    {
      "js": ["src/index.ts"],
      "matches": ["*://*.rateyourmusic.com/*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/stream-links/main.ts"],
      "matches": ["*://*.rateyourmusic.com/release/*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/release-submission/main.ts"],
      "matches": ["*://*.rateyourmusic.com/releases/ac*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/cover-art/main.ts"],
      "matches": ["*://*.rateyourmusic.com/images/upload*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/stream-link-submission/main.ts"],
      "matches": ["*://*.rateyourmusic.com/submit_media_link*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/user-collection/main.ts"],
      "matches": [
        "*://*.rateyourmusic.com/collection*",
        "*://*.rateyourmusic.com/film_collection*"
      ],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/user-page/main.ts"],
      "matches": ["*://*.rateyourmusic.com/~*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/vote-history/genres.ts"],
      "matches": ["*://*.rateyourmusic.com/rgenre/vote_history*"],
      "run_at": "document_start"
    },
    {
      "js": ["src/modules/vote-history/descriptors.ts"],
      "matches": ["*://*.rateyourmusic.com/rdescriptor/vote_history*"],
      "run_at": "document_start"
    }
  ],
  "permissions": [
    "storage",
    "downloads",
    "tabs",
    "scripting",
    "activeTab",
    "*://*/*"
  ],
  "{{chrome}}.host_permissions": ["*://*/*"]
}
